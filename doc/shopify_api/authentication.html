<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <title>Shopify API Documentation</title>
    <link rel="stylesheet" href="stylesheets/style.css" type="text/css" media="screen" />    

  </head>
  <body>
    <a name="top" />
    <div id="header">
      <h1><a href="/developers">Shopify Developers</a></h1>
    </div>
    
    <div id="subheader">
      <ul>
        <li onclick="document.location='http://www.shopify.com/developers'"><a href="http://www.shopify.com/developers" style="background: url('images/cog.png') center left no-repeat;padding-left:19px">Developers Home</a></li>
        <li onclick="document.location='http://www.shopify.com/developers/api/'" class="current"><a href="http://www.shopify.com/developers/api/" style="background: url('images/help.png') center left no-repeat;padding-left:19px">Documentation</a></li>
        <li onclick="document.location='http://www.shopify.com/developers/publishing'"><a href="http://www.shopify.com/developers/publishing/" style="background: url('images/group.png') center left no-repeat;padding-left:19px">Publishing your app</a></li>
      </ul>
    </div>

    <div id="container" class="clearfix">

      <!-- begin div.main-->
      <div id="main">
        
        
    <div id="page">
      <div id="sidebar">
        <div id="sidebar-items">                
          <h3>Topics</h3>
          <ul>           
            <li><a href="index.html">Overview</a></li>      
            <li><a href="authentication.html">Authentication</a></li> 
            <li><a href="billing.html">Billing</a></li> 
          </ul>
               
          <h3>Resources</h3>
          <ul>
            
            <li>
              <a href="applicationcharge.html" class="active">ApplicationCharge</a>
              
            </li>      
            
            <li>
              <a href="article.html" class="active">Article</a>
              
            </li>      
            
            <li>
              <a href="blog.html" class="active">Blog</a>
              
            </li>      
            
            <li>
              <a href="collect.html" class="active">Collect</a>
              
            </li>      
            
            <li>
              <a href="comment.html" class="active">Comment</a>
              
            </li>      
            
            <li>
              <a href="country.html" class="active">Country</a>
              
            </li>      
            
            <li>
              <a href="customcollection.html" class="active">CustomCollection</a>
              
            </li>      
            
            <li>
              <a href="fulfillments.html" class="active">Fulfillments</a>
              
            </li>      
            
            <li>
              <a href="order.html" class="active">Order</a>
              
            </li>      
            
            <li>
              <a href="page.html" class="active">Page</a>
              
            </li>      
            
            <li>
              <a href="product.html" class="active">Product</a>
              
            </li>      
            
            <li>
              <a href="product_image.html" class="active">Product Image</a>
              
            </li>      
            
            <li>
              <a href="product_variant.html" class="active">Product Variant</a>
              
            </li>      
            
            <li>
              <a href="province.html" class="active">Province</a>
              
            </li>      
            
            <li>
              <a href="recurringapplicationcharge.html" class="active">RecurringApplicationCharge</a>
              
            </li>      
            
            <li>
              <a href="redirect.html" class="active">Redirect</a>
              
            </li>      
            
            <li>
              <a href="shop.html" class="active">Shop</a>
              
            </li>      
            
            <li>
              <a href="smartcollection.html" class="active">SmartCollection</a>
              
            </li>      
            
            <li>
              <a href="transactions.html" class="active">Transactions</a>
              
            </li>      
            
          </ul>
        </div>
      </div>

      <div id="content">
        <h1>Shopify API Authentication</h1>

<p>Every Shopify API call looks something like this:
  <code>https://api_key:password@some-store.myshopify.com/admin/some-resource</code>
  For example, the following call fetches all of <em>some-shop</em>&rsquo;s orders:
  <code>https://API_KEY:SOME_PASSWORD@some-shop.myshopify.com/admin/orders.xml</code>
</p>

<p>Without a valid <strong>API key</strong> and <strong>password</strong>, nothing works.</p>

<p>This article covers how to find and generate those two credentials.</p>

<h2>API keys and secrets</h2>

<p>Each Shopify application has an API key and a secret known only to you and Shopify. Don&rsquo;t ever share this secret &ndash; if someone else gets a hold of it, they&rsquo;ll be able to access anything your application has access to (which is really bad if shop owners have trusted you and only you with taking safe care of their data).
</p>

<p>To illustrate the process of authentication, let&rsquo;s say that you&rsquo;ve created a Shopify application called Mega Invoice, and it has an <strong>API key</strong> &ldquo;invoice-api-key&rdquo;, and a <strong>secret</strong> &ldquo;hush&rdquo;.
</p>

<p>We can see these credentials in this screenshot from the Shopify Partners admin:
  <img src="images/MegaInvoiceCredentials.png" /><br />
  
  Under normal circumstances, the API key and secret are strings of random characters (e.g. &ldquo;f26eb9d7cd1352014d22a54e13bf6259&rdquo;) but we&rsquo;ll keep it simple for this example.
</p>

<p>Mega Invoice is set up at http://megainvoice.com so you&rsquo;ve configured so that after installation, it redirects shop owners to <code>http://megainvoice.com/welcome</code>
</p>

<p>We can see the <strong>return url</strong> from this screenshot from the Shopify Partners admin:
  <img src="images/MegaInvoiceReturnUrl.png" /><br />
</p>

<h2>Installation Walkthrough</h2>

<p>Now that we&rsquo;ve set the stage, let&rsquo;s walk through a shop owner installing Mega Invoice:

<ol>
  <li>A shop owner is amazed by your marketing on the app store, and ends up looking at the &ldquo;Installing Mega Invoice&rdquo; screen, otherwise accessible by doing a <code>GET &lt;shop url&gt;/admin/api/auth?app=&lt;API key&gt;</code>
    <img src="images/MegaInvoiceInstallation.png" /><br />
  </li>
  
  <li>The shop owner clicks &ldquo;Install&rdquo;, and in doing so, grants your application access to their shop&rsquo;s data.
  </li>
  
  <li>Shopify redirects to Mega Invoice&rsquo;s <strong>return url</strong>, and appends the shop name and an <em>authentication token</em> as parameters:
    <code>GET http://megainvoice.com/welcome?shop=some-shop.myshopify.com&t=a94a110d86d2452eb3e2af4cfb8a3828</code>
    (In this case, the <em>authentication token</em> <strong>t</strong> is a94a110d86d2452eb3e2af4cfb8a3828)
  </li>
  
  <li>Mega Invoice concatenates its secret with <em>authentication token</em> <strong>t</strong> and hashes the result into an MD5 hexdigest to generate the API password:
    <code>password = MD5.hexdigest(secret + t)</code>
    which in our example looks like:
    <code>password = MD5.hexdigest("hush" + "a94a110d86d2452eb3e2af4cfb8a3828")</code>
    so the generated password specific to Mega Invoice and <em>some-shop</em> is
    <code>36b29a08b3113077f14777570c0577ed</code>
    <span class="highlight"><strong>Note that the order of parameters matters when you hash the secret + token &ndash; it must be in this order.</strong></span>
  </li>
  
  <li>That’s it! We’re done: we know the Mega Invoice API key and the password, so we can run an API call like this:
    <code>https://invoice-api-key:36b29a08b3113077f14777570c0577ed@some-shop.myshopify.com/admin/orders.xml</code>
    
    and receive all of <em>some-shop</em>&rsquo;s orders.
  </li>
</ol>
          

				<div id="outtro">         
				  Last updated at Jun 2009 Jun:06 AM.
				</div>
      </div>
      
      <div id="footer">Shopify &copy; 2009</div>
    </div>


      </div>
    </div>


    </body>
  </html>
